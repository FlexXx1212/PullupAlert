<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pullup Alert</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <link rel="stylesheet" href="style.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link rel="icon" type="image/png" href="favicon.png">
</head>

<body>
  <main id="app">
    <header class="app-header">
      <div class="header-left">
        <h1 class="app-title">Pullup Alert</h1>
        <p class="app-subtitle">Deine tägliche Klimmzug-Routine</p>
      </div>
      <div class="header-right">
        <div class="standup-inline">
          <span id="standUpTimer" class="standup-timer" style="display: none;"></span>
          <button
            id="standUpReset"
            class="standup-reset"
            type="button"
            aria-label="Stand Up Timer zurücksetzen"
            title="Stand Up Timer zurücksetzen"
            style="display: none;"
          >
            <i class="fas fa-redo" aria-hidden="true"></i>
          </button>
        </div>
        <span id="currentTime" class="current-time" aria-label="Aktuelle Uhrzeit"></span>
      </div>
    </header>

    <!-- Übersicht aller Workouts -->
    <section id="overviewView" class="view view--active" aria-label="Übersicht Workouts">
      <div class="overview-header">
        <h2>Heutige Workouts</h2>
        <button id="addWorkoutBtn" class="btn btn--ghost" aria-label="Neues Workout erstellen">
          + Neu
        </button>
      </div>
      <p class="hint">
        Workouts werden automatisch zur richtigen Uhrzeit gestartet. Du kannst sie auch manuell öffnen.
      </p>

      <form id="settingsForm" class="settings-form">
        <div class="setting-group">
          <label for="setsInput">Max. Sets:</label>
          <div class="number-control">
            <button type="button" class="btn-control" data-action="dec" data-target="setsInput">-</button>
            <input type="number" id="setsInput" min="1" max="99" readonly />
            <button type="button" class="btn-control" data-action="inc" data-target="setsInput">+</button>
          </div>
        </div>
        <div class="setting-group">
          <label for="repsInput">Max. Reps:</label>
          <div class="number-control">
            <button type="button" class="btn-control" data-action="dec" data-target="repsInput">-</button>
            <input type="number" id="repsInput" min="1" max="99" readonly />
            <button type="button" class="btn-control" data-action="inc" data-target="repsInput">+</button>
          </div>
        </div>
      </form>

      <div id="workoutList" class="workout-list">
        <!-- Karten werden per JS eingefügt -->
      </div>

      <!-- Stand Up Alert Settings -->
      <div class="standup-settings">
        <div class="standup-header">
          <h3>Stand Up Alert</h3>
          <label class="switch">
            <input type="checkbox" id="standUpToggle">
            <span class="slider round"></span>
          </label>
        </div>
        <div class="standup-controls">
          <div class="setting-group">
            <label>Intervall (Min-Max):</label>
            <div class="range-inputs">
              <input type="number" id="suMinTime" value="45" min="1">
              <span>-</span>
              <input type="number" id="suMaxTime" value="75" min="1">
            </div>
          </div>
          <div class="setting-group">
            <label>Steh-Dauer (Min-Max):</label>
            <div class="range-inputs">
              <input type="number" id="suMinDur" value="10" min="1">
              <span>-</span>
              <input type="number" id="suMaxDur" value="20" min="1">
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Aktives Workout -->
    <section id="activeView" class="view view--hidden" aria-label="Aktives Workout">
      <button id="backToOverview" class="btn btn--ghost">
        ← Zur Übersicht
      </button>

      <div class="active-container">
        <div class="active-header">
          <h2 id="activeTitle" class="active-title"></h2>
          <p id="activeLabel" class="active-label"></p>
          <p id="activeTime" class="active-time"></p>
          <p id="activeGrip" class="active-grip"></p>
        </div>

        <div class="active-body">
          <ul id="activeExercises" class="exercise-list">
            <!-- Übungen per JS -->
          </ul>
        </div>

        <div class="active-footer">
          <div class="timer-wrapper" aria-label="75 Sekunden Timer">
            <span id="countdown" class="timer-number">75</span>
            <span class="timer-unit">Sekunden</span>
          </div>
          <button id="completeButton" class="btn btn--primary">
            Workout abschließen
          </button>
        </div>
      </div>
    </section>

    <!-- Workout Editor Modal -->
    <div id="workoutModal" class="modal modal--hidden" aria-hidden="true">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Workout bearbeiten</h2>
          <button id="closeModalBtn" class="btn-icon" aria-label="Schließen">×</button>
        </div>
        <div class="modal-body">
          <form id="workoutForm">
            <input type="hidden" id="editWorkoutId" />

            <div class="form-row">
              <div class="form-group">
                <label for="wfTitle">Titel</label>
                <input type="text" id="wfTitle" required placeholder="z.B. Rücken & Bizeps" />
              </div>
              <div class="form-group">
                <label for="wfLabel">Label (optional)</label>
                <input type="text" id="wfLabel" placeholder="z.B. Morgens" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="wfTime">Uhrzeit</label>
                <input type="time" id="wfTime" required />
              </div>
              <div class="form-group">
                <label for="wfGrip">Griffart</label>
                <input type="text" id="wfGrip" placeholder="z.B. Weiter Obergriff" />
              </div>
            </div>

            <div class="form-group">
              <label>Wochentage</label>
              <div class="days-checkboxes" id="wfDaysContainer">
                <!-- Checkboxen per JS -->
              </div>
            </div>

            <div class="form-group">
              <label for="wfExercises">Übungen (eine pro Zeile)</label>
              <textarea id="wfExercises" rows="4" placeholder="Klimmzüge: [SETS] Sets - [REPS] Reps"></textarea>
              <p class="hint-small">
                Platzhalter: <code>[SETS]</code>, <code>[REPS]</code>. Mathe erlaubt: <code>[SETS*2]</code>, <code>[REPS+5]</code>.
              </p>
            </div>

            <div class="preview-box">
              <span class="preview-label">Vorschau:</span>
              <span id="wfPreview" class="preview-content">-</span>
            </div>

            <div class="modal-actions">
              <button type="button" id="deleteWorkoutBtn" class="btn btn--danger" style="display: none;">Löschen</button>
              <div class="spacer"></div>
              <button type="button" id="toggleCompletionBtn" class="btn btn--primary"
                aria-label="Workout-Status umschalten">
                <i class="fa-solid fa-check"></i>
              </button>
              <button type="button" id="cancelModalBtn" class="btn btn--ghost">Abbrechen</button>
              <button type="submit" class="btn btn--primary">Speichern</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
  <script src="app.js"></script>
</body>

</html>